Version 1.0 – Grundlæggende galleri & vandmærke
	•	Registrerede CPT kundegalleri med metaboxes til upload af original­billeder og vandmærke­indstillinger.
	•	Tilføjede settings under Kundegalleri → Indstillinger for vandmærke­tekst, opacity, font‑størrelse, position, font‑valg og aktivering.
	•	Kortstatistik i admin‑listen: kolonne “Antal billeder” og row‑action “Se galleri.”

🚀 Version 1.1 – Shortcode & front‑end galleri
	•	Implementerede [kundegalleri id=… layout=…] shortcode (tiled, mosaic, masonry).
	•	Automatisk loop over vandmærkede filer og generering af HTML‑markup (billeder + captions).
	•	Asynkron ZIP‑download af både web‑ og original‑versioner via admin-ajax.php.

✅ Version 1.2 – Godkendelsessystem
	•	Tilføjede godkendelses‑dialog (tekst + “Accepter billederne”-knap).
	•	AJAX‑handler (wg_approve_gallery) gemmer post_meta wg_accepted_time.
	•	Badge “Godkendt ‹dato – tid›” vises i front og i admin‑metabox “Billeder godkendt.”
	•	Download‑knapper deaktiveres indtil godkendelse, gøres aktive herefter.

🎨 Version 1.3 – Styling & layout­forbedringer
	•	Pakkede stilarter ud i assets/css/approval.css og assets/css/gallery.css.
	•	Fjernede hover‑zoom på billede­kort, tilføjede blød box‑shadow‑effekt.
	•	Optimerede grid‑ og masonry‑layouts med responsivt breakpoints.

📋 Version 1.4 – LightGallery integration
	•	Enqueued LightGallery CSS/JS fra CDN og initialiseret lightbox på billed­links.
	•	Aktiverede klik kun på <img> (pointer-events) for at undgå konflikt med godkendelses‑knappen.

⚙️ Version 1.5 – Dialog‑tekst i Indstillinger
	•	Tilføjede WP‑Editor‑felt (wp_editor) under Kundegalleri → Indstillinger til HTML‑baseret godkendelses‑tekst.
	•	Gemmer valideret via wp_kses_post(), så du kan bruge <strong>, <em>, links osv.
	•	Shortcode‑fil opdateret til at hente wg_approval_text og wrappes i <p class="wg-approval-text">.

$dialog_text = get_option('wg_approval_text', 'Når du har godkendt billederne…');
echo '<p class="wg-approval-text">' . wp_kses_post($dialog_text) . '</p>';

	•	Mulighed for fri HTML‑formatering (fed/kursiv/lister/links) i dialogen.

Funktionstjekliste – Weigang Kundegalleri Plugin (v3.1)

	Funktion
Status
Billeder kan uploades sikkert (kun jpg, png, gif)
âœ…
Filnavne: weigang_1123-abcde.jpg format
âœ…
Automatisk .htaccess sikrer upload-mappe
âœ…
AJAX upload via public.js
âœ…
AJAX delete billeder
âœ…
Frontend galleri med LightGallery
âœ…
HÃ¸jreklik deaktiveret pÃ¥ billeder
âœ…
Bruger kan acceptere billeder og hente ZIP
âœ…
E-mail kan sendes til kunde via AJAX
âœ…
Login-formular (shortcode) pÃ¥ separat login-side
âœ…
Login sker via AJAX, sÃ¦tter cookie
âœ…
Automatisk udlÃ¸b (15 dage) pÃ¥ gallerier
âœ…
UdlÃ¸bne gallerier flyttes automatisk til Trash
âœ…
E-mail-log bliver gemt pÃ¥ server
âœ…


Changelog — Weigang Kundegalleri v3.0 → v3.1

Ã†ndring
Beskrivelse
âž• TilfÃ¸jet kundegalleri-login.js
Login via AJAX uden header-fejl
ðŸ”¥ Flyttet login-flow til AJAX
Bedre brugeroplevelse, ingen kritiske PHP-fejl
ðŸ”¥ TilfÃ¸jet korrekt indlÃ¦sning af login.js kun pÃ¥ login-side
Kun hvor shortcode [kundegalleri_login] findes
ðŸ›¡ï¸ Forbedret sikkerhed pÃ¥ upload-mappen (.htaccess)
Ingen adgang til PHP-filer i upload-mappen
ðŸ›¡ï¸ MIME-type tjek ved upload
Kun billedeformater tilladt
âš¡ Sikrere billednavngivning
Nummer + unikt ID i filnavn
ðŸ›¡ï¸ Bedre logning af sendte e-mails
Gemmes i post_meta + serverfil
ðŸ›¡ï¸ HÃ¸jreklik deaktiveret pÃ¥ billeder i galleriet
Bedre billedbeskyttelse



